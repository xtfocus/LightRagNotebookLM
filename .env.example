# =============================================================================
# Environment Variables Template
# =============================================================================
# Copy this file to .env and update the values as needed
# cp .env.example .env

# =============================================================================
# Domain Configuration
# =============================================================================
# This would be set to the production domain with an env var on deployment
# used by Traefik to transmit traffic and acquire TLS certificates
# DOMAIN=localhost
# To test the local Traefik config
DOMAIN=localhost.tiangolo.com

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=superglobalsecretkey
POSTGRES_DB=app

# LangGraph Database (for agent service)
LANGGRAPHDB_USER=postgres
LANGGRAPHDB_PASSWORD=superglobalsecretkey
LANGGRAPHDB_NAME=langgraph
LANGGRAPHDB_PORT=5433

# =============================================================================
# Service Ports (Configurable)
# =============================================================================
BACKEND_PORT=8000
FRONTEND_PORT=3000
AGENT_PORT=8200
MINIO_API_PORT=9000
MINIO_WEB_PORT=9001
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025

# =============================================================================
# MinIO Configuration
# =============================================================================
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=changeme

# =============================================================================
# API Configuration
# =============================================================================
BACKEND_API_PREFIX=/api/v1
AGENT_API_PREFIX=/api/v1

# =============================================================================
# Frontend Configuration
# =============================================================================
# Used by the backend to generate links in emails to the frontend
FRONTEND_HOST=http://localhost:5173
# In staging and production, set this env var to the frontend host, e.g.
# FRONTEND_HOST=https://dashboard.example.com

NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_BACKEND_API_PREFIX=/api/v1
NEXT_PUBLIC_AGENT_API_PREFIX=/api/v1

# =============================================================================
# Agent Service Configuration
# =============================================================================
AGENT_SERVICE_URL=http://agent:8000
AGENT_URL=http://agent:8000
AGENT_AGUI_URL=http://agent:8000${AGENT_API_PREFIX}/chat-agui/

# =============================================================================
# Email Configuration
# =============================================================================
SMTP_TLS=True
SMTP_SSL=False
SMTP_PORT=587
SMTP_HOST=
SMTP_USER=
SMTP_PASSWORD=
EMAILS_FROM_EMAIL=info@example.com
EMAILS_FROM_NAME=Your App Name

# =============================================================================
# Security Configuration
# =============================================================================
SECRET_KEY=superglobalsecretkey
ACCESS_TOKEN_EXPIRE_MINUTES=11520  # 8 days
EMAIL_RESET_TOKEN_EXPIRE_HOURS=48

# =============================================================================
# Application Configuration
# =============================================================================
PROJECT_NAME="Full Stack FastAPI Project"
STACK_NAME=full-stack-fastapi-project
ENVIRONMENT=local  # local, staging, production
FIRST_SUPERUSER=admin@example.com
FIRST_SUPERUSER_PASSWORD=superglobalsecretkey

# =============================================================================
# CORS Configuration
# =============================================================================
BACKEND_CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173,https://localhost,https://localhost:5173,http://localhost.tiangolo.com

# =============================================================================
# External API Keys (Required for production)
# =============================================================================
OPENAI_API_KEY=YOUROPENAIAPIKEY
TAVILY_API_KEY=YOURTAVILYAPIKEY

# =============================================================================
# Docker Configuration
# =============================================================================
# Configure these with your own Docker registry images
DOCKER_IMAGE_BACKEND=backend
DOCKER_IMAGE_FRONTEND=frontend
DOCKER_AGENT_BACKEND=agent
TAG=latest

# =============================================================================
# Testing Configuration
# =============================================================================
TEST_AGENT_URL=http://agent:8000/chat

# =============================================================================
# Optional: Sentry Configuration
# =============================================================================
SENTRY_DSN=

# =============================================================================
# Next.js Configuration
# =============================================================================
NEXT_TELEMETRY_DISABLED=1

# =============================================================================
# File Processing Pipeline Configuration
# =============================================================================
# Kafka Configuration
KAFKA_PORT=9092
KAFKA_EXTERNAL_PORT=9094
KAFKA_UI_PORT=8080

# Qdrant Configuration
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334

# OpenAI Configuration for Embeddings
OPENAI_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSION=1536

# Indexing Worker Configuration
INDEXING_WORKER_BATCH_SIZE=10
INDEXING_WORKER_POLL_INTERVAL=5
INDEXING_WORKER_CHUNK_SIZE=1000
INDEXING_WORKER_CHUNK_OVERLAP=200

# Worker Configuration
DOCKER_IMAGE_WORKER=app-worker

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_EXTERNAL_BOOTSTRAP_SERVERS=localhost:9094
KAFKA_TOPIC_SOURCE_CHANGES=source_changes

# Qdrant Configuration
QDRANT_HOST=qdrant
QDRANT_COLLECTION_NAME=documents

# =============================================================================
# File Processing Limits (Configurable)
# =============================================================================
# Granular file size limits for different file types
MAX_PDF_SIZE_BYTES=10485760       # 10MB default
MAX_DOCX_SIZE_BYTES=10485760       # 10MB default
MAX_TXT_SIZE_BYTES=10485760        # 10MB default
MIN_FILE_SIZE_BYTES=100            # 100 bytes minimum

# URL Processing Configuration
URL_PROCESSING_TIMEOUT_SECONDS=25  # 25 seconds default

# Text Processing Configuration
MAX_BINARY_NULL_RATIO=0.1          # 10% null bytes threshold

# Legacy file size limit (fallback for unsupported file types)
MAX_FILE_SIZE_BYTES=104857600      # 100MB default (legacy)
MAX_TOTAL_UPLOAD_SIZE_BYTES=524288000  # 500MB default

# Source Management Configuration
MAX_CONCURRENT_PROCESSING_PER_USER=5      # Maximum files processing simultaneously per user

# Allowed file types for upload
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,md,csv,xlsx,xls,ppt,pptx

# ELK Stack Configuration
ELASTIC_VERSION=8.11.0
ELASTIC_PASSWORD=changeme
LOGSTASH_INTERNAL_PASSWORD=changeme
KIBANA_SYSTEM_PASSWORD=changeme

# ELK Ports
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_TRANSPORT_PORT=9300
LOGSTASH_BEATS_PORT=5044
LOGSTASH_TCP_PORT=50000
LOGSTASH_UDP_PORT=50000
LOGSTASH_HTTP_PORT=9600
KIBANA_PORT=5601

# Additional ELK User Passwords
METRICBEAT_INTERNAL_PASSWORD=
FILEBEAT_INTERNAL_PASSWORD=changeme
HEARTBEAT_INTERNAL_PASSWORD=changeme
MONITORING_INTERNAL_PASSWORD=changeme
BEATS_SYSTEM_PASSWORD=changeme


# Change this according to your system
DOCKER_ROOT_DIR=/var/lib/docker
FILEBEAT_HTTP_PORT=5066
